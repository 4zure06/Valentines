<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>My Rainbow 💖 Animated Wordle</title>
    <style>
        body {
            font-family: 'Comic Sans MS', Arial, sans-serif;
            background: linear-gradient(to right, #ff9a9e, #fad0c4);
            text-align: center;
            padding-top: 30px;
            color: #fff;
            overflow: hidden;
        }

        h1 {
            font-size: 40px;
            text-shadow: 2px 2px 5px #ff4d6d;
        }

        #board {
            margin-top: 20px;
            display: grid;
            grid-template-columns: repeat(9, 50px);
            gap: 5px;
            justify-content: center;
        }

        .tile {
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid #fff;
            font-size: 24px;
            font-weight: bold;
            text-transform: uppercase;
            background-color: transparent;
            transition: background-color 0.3s;
            perspective: 600px;
        }

            .tile.flip {
                animation: flip 0.6s forwards;
            }

        @keyframes flip {
            0% {
                transform: rotateX(0deg);
            }

            50% {
                transform: rotateX(90deg);
            }

            100% {
                transform: rotateX(0deg);
            }
        }

        input {
            padding: 10px;
            font-size: 18px;
            text-transform: uppercase;
            border-radius: 10px;
            border: none;
            outline: none;
        }

        button {
            padding: 12px 20px;
            font-size: 18px;
            margin: 10px;
            border-radius: 10px;
            border: none;
            cursor: pointer;
            background-color: #ff4d6d;
            color: white;
            position: relative;
        }

            button:hover {
                background-color: #ff1f4d;
            }

        #noBtn {
            transition: left 0.5s ease, top 0.5s ease, opacity 0.3s ease;
        }

        #result {
            margin-top: 25px;
            font-size: 24px;
            font-weight: bold;
            min-height: 80px;
        }

        .heart {
            position: fixed;
            color: pink;
            font-size: 20px;
            animation: float 3s linear infinite;
        }

        @keyframes float {
            0% {
                transform: translateY(0);
                opacity: 1;
            }

            100% {
                transform: translateY(-100vh);
                opacity: 0;
            }
        }

        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            top: 0;
            left: 0;
            pointer-events: none;
            opacity: 0.8;
            animation: fall linear forwards;
        }

        @keyframes fall {
            to {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }

        .arrow {
            position: absolute;
            font-size: 40px;
            color: yellow;
            animation: blink 1s infinite;
        }

        @keyframes blink {
            0%,50%,100% {
                opacity: 1
            }

            25%,75% {
                opacity: 0
            }
        }
    </style>
</head>
<body>

    <h1>💘 My Rainbow Wordle 💘</h1>
    <p>Guess the 9-letter secret word! Hint: Starts with "V", ends with "E" 💌</p>

    <input id="guessInput" maxlength="9" placeholder="Type your guess">
    <button onclick="submitGuess()">Guess 💌</button>

    <div id="board"></div>
    <div id="result"></div>

    <script>
        const secretWord = "VALENTINE";
        const board = document.getElementById("board");
        const result = document.getElementById("result");
        let guesses = [];
        let arrowTimeout;

        // Draw previous guesses (colored)
        function drawPreviousGuesses() {
            const previousTiles = [];
            guesses.slice(0, -1).forEach(guess => {
                guess.split('').forEach((letter, i) => {
                    const tile = document.createElement("div");
                    tile.className = "tile";
                    tile.textContent = letter;
                    if (letter === secretWord[i]) tile.style.backgroundColor = "#6aaa64";
                    else if (secretWord.includes(letter)) tile.style.backgroundColor = "#c9b458";
                    else tile.style.backgroundColor = "#787c7e";
                    board.appendChild(tile);
                    previousTiles.push(tile);
                });
            });
            return previousTiles.length;
        }

        // Evaluate guess colors
        function evaluate(guess) {
            const colors = Array(secretWord.length).fill("#787c7e");
            const used = Array(secretWord.length).fill(false);
            const secretArr = secretWord.split('');

            for (let i = 0; i < guess.length; i++) {
                if (guess[i] === secretArr[i]) {
                    colors[i] = "#6aaa64";
                    used[i] = true;
                }
            }
            for (let i = 0; i < guess.length; i++) {
                if (colors[i] === "#6aaa64") continue;
                const idx = secretArr.findIndex((l, j) => l === guess[i] && !used[j]);
                if (idx >= 0) {
                    colors[i] = "#c9b458";
                    used[idx] = true;
                }
            }
            return colors;
        }

        // Animate latest guess
        function animateFlip(guess) {
            const start = drawPreviousGuesses();
            const colors = evaluate(guess);
            guess.split('').forEach((letter, i) => {
                const tile = document.createElement("div");
                tile.className = "tile";
                tile.textContent = letter;
                board.appendChild(tile);
                setTimeout(() => {
                    tile.classList.add("flip");
                    setTimeout(() => { tile.style.backgroundColor = colors[i]; }, 300);
                }, i * 300);
            });
        }

        // Submit guess
        function submitGuess() {
            const input = document.getElementById("guessInput");
            const guess = input.value.toUpperCase();
            if (guess.length !== secretWord.length) {
                result.textContent = "Guess must be 9 letters!";
                return;
            }
            guesses.push(guess);
            board.innerHTML = "";
            animateFlip(guess);
            input.value = "";

            setTimeout(() => {
                if (guess === secretWord) {
                    showValentineQuestion();
                } else {
                    let hint = '';
                    guess.split('').forEach((l, i) => {
                        hint += (l === secretWord[i]) ? l : '_';
                    });
                    result.textContent = "❌ Not quite! Hint: " + hint;
                }
            }, guess.length * 300 + 300);
        }

        // Hearts and confetti
        function launchHearts() {
            for (let i = 0; i < 30; i++) {
                const h = document.createElement("div");
                h.className = "heart"; h.innerHTML = "💖";
                h.style.left = Math.random() * 100 + "vw";
                h.style.bottom = "0px";
                h.style.fontSize = Math.random() * 20 + 15 + "px";
                document.body.appendChild(h);
                setTimeout(() => h.remove(), 3000);
            }
        }
        function launchConfetti() {
            for (let i = 0; i < 100; i++) {
                const c = document.createElement("div");
                c.className = "confetti";
                c.style.left = Math.random() * 100 + "vw";
                c.style.background = ["#ff4d6d", "#ff99cc", "#fff", "#ff66aa"][Math.floor(Math.random() * 4)];
                c.style.animationDuration = (2 + Math.random() * 3) + "s";
                document.body.appendChild(c);
                setTimeout(() => c.remove(), 5000);
            }
        }

        // Valentine question
        function showValentineQuestion() {
            result.innerHTML = `
        💖 You got it! 💖<br><br>
        My Rainbow 🌈, will you be my Valentine?<br><br>
        <button id="yesBtn" onclick="finalYes()">YES 💕</button>
        <button id="noBtn" onclick="finalNo()">NO 😅</button>
      `;
            launchHearts();
            dodgeNoButton();
            showArrowLater();
        }

        // YES/NO
        function finalYes() {
            clearTimeout(arrowTimeout);
            document.body.innerHTML = `
        <h1>💘 YES! 💘</h1>
        <p>My Rainbow 🌈, I love you so much! 💖<br>See you later 😘</p>
      `;
            launchConfetti();
        }
        function finalNo() {
            document.body.innerHTML = `
        <h1>😅 Aw, maybe next time!</h1>
        <p>My Rainbow 🌈, I know you’re cute and funny, so I’m not giving up 😏💖</p>
      `;
            launchConfetti();
        }

        // Smooth NO button dodge
        function dodgeNoButton() {
            const noBtn = document.getElementById("noBtn");
            document.addEventListener("mousemove", (e) => {
                if (!noBtn) return;
                const rect = noBtn.getBoundingClientRect();
                const distance = Math.hypot(e.clientX - (rect.left + rect.width / 2), e.clientY - (rect.top + rect.height / 2));
                if (distance < 100) {
                    const maxX = window.innerWidth - rect.width;
                    const maxY = window.innerHeight - rect.height;
                    noBtn.style.position = "absolute";
                    noBtn.style.left = Math.random() * maxX + "px";
                    noBtn.style.top = Math.random() * maxY + "px";
                    noBtn.style.opacity = 0.7;
                    setTimeout(() => noBtn.style.opacity = 1, 400);
                }
            });
        }

        // Arrow pointing down to YES after 7 seconds
        function showArrowLater() {
            arrowTimeout = setTimeout(() => {
                const yesBtn = document.getElementById("yesBtn");
                if (!yesBtn) return;
                const arrow = document.createElement("div");
                arrow.className = "arrow";
                arrow.innerHTML = "⬇️ Click YES!";
                document.body.appendChild(arrow);
                const rect = yesBtn.getBoundingClientRect();
                arrow.style.left = rect.left + rect.width / 2 - 40 + "px";
                arrow.style.top = rect.top - 50 + "px";
            }, 7000);
        }
    </script>

</body>
</html>
